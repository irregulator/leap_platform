{
  "obfsproxy": {
    "scramblesuit": {
      "password": "= base32_secret :scramblesuit_password",
      "port" : "= rand_range :scramblesuit_port, 18000..32000"
    },
    "gateway_address": "= self['openvpn'] ? openvpn.gateway_address : nodes_like_me[:services => 'openvpn'].field('openvpn.gateway_address').shuffle.first"
    // Later, if we add a SafeNil class that looks and acts like nil
    // but will allow you to call methods on it (each returning another SafeNil)
    // without throwing an exception, we could do:
    // "gateway_address": "= self['openvpn'] ? openvpn.gateway_address : (nodes_like_me[:services => 'openvpn']['location.name' => location.name].field('openvpn.gateway_address').shuffle.first || nodes_like_me[:services => 'openvpn'].field('openvpn.gateway_address').shuffle.first)"
    // Perhaps we should also create a macro.
  }
}
